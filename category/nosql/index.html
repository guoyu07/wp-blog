<!DOCTYPE html>

<html class="no-js" lang="zh-CN" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

	<head profile="http://gmpg.org/xfn/11">
		
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" >
																		
		<title>Nosql | 月随人</title>
		 
		
<!-- SEO Ultimate (http://www.seodesignsolutions.com/wordpress-seo/) -->
<!-- /SEO Ultimate -->

<script>document.documentElement.className = document.documentElement.className.replace("no-js","js");</script>
<link rel="alternate" type="application/rss+xml" title="月随人 &raquo; Feed" href="http://www.kcloze.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="月随人 &raquo; 评论Feed" href="http://www.kcloze.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="月随人 &raquo; Nosql分类目录Feed" href="http://www.kcloze.com/category/nosql/feed/" />
<link rel='stylesheet' id='hoffman_googleFonts-css'  href='//fonts.googleapis.com/css?family=Raleway%3A400%2C600%2C700%2C800%7CVollkorn%3A400%2C400italic%2C700%2C700italic&#038;ver=4.1' type='text/css' media='all' />
<link rel='stylesheet' id='hoffman_genericons-css'  href='http://www.kcloze.com/wp-content/themes/hoffman/genericons/genericons.css?ver=4.1' type='text/css' media='all' />
<link rel='stylesheet' id='hoffman_style-css'  href='http://www.kcloze.com/wp-content/themes/hoffman/style.css?ver=4.1' type='text/css' media='all' />
<script type='text/javascript' src='http://cdn.staticfile.org/jquery/2.1.1/jquery.min.js?ver=2.1.0'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.kcloze.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.kcloze.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.1" />
      
	      <!-- Customizer CSS --> 
	      
	      <style type="text/css">
	           body a { color:#928452; }	           body a:hover { color:#928452; }	           .blog-title a { color:#928452; }	           .main-menu > li > ul:before { border-bottom-color:#928452; }	           .main-menu ul li { background:#928452; }	           .main-menu ul > .page_item_has_children:hover::after { border-left-color:#928452; }	           .main-menu ul > .menu-item-has-children:hover::after { border-left-color:#928452; }	           .menu-social a:hover { background:#928452; }	           .sticky .is-sticky:hover { background:#928452; }	           .sticky .is-sticky:hover:before { border-top-color:#928452; }	           .sticky .is-sticky:hover:before { border-left-color:#928452; }	           .sticky .is-sticky:hover:after { border-left-color:#928452; }	           .sticky .is-sticky:hover:after { border-bottom-color:#928452; }	           .flex-direction-nav a:hover { background-color:#928452; }	           .post-quote cite { color:#928452; }	           a.post-quote:hover cite { border-bottom-color:#928452; }	           .post-title a:hover { color:#928452; }	           .post-header:after { background:#928452; }	           .post-content a { color:#928452; }	           .post-content a:hover { color:#928452; }	           .post-content a:hover { border-bottom-color:#928452; }	           .post-content a.more-link { border-color:#928452; }	           .post-content a.more-link:hover { background:#928452; }	           .post-content input[type="submit"]:hover { background-color:#928452; }	           .post-content input[type="reset"]:hover { background-color:#928452; }	           .post-content input[type="button"]:hover { background-color:#928452; }	           .post-content fieldset legend { background-color:#928452; }	           #infinite-handle span { color:#928452; }	           #infinite-handle span { border-color:#928452; }	           #infinite-handle span:hover { background:#928452; }	           .post-content .page-links a:hover { background:#928452; }	           .tab-selector a.active { color:#928452; }	           .tab-selector a.active { color:#928452; }	           .add-comment-title a { color:#928452; }	           .add-comment-title a:hover { color:#928452; }	           .bypostauthor .by-post-author { background-color:#928452; }	           .comment-actions a:hover { color:#928452; }	           .comment-actions a:hover:before { color:#928452; }	           .comment-header h4 a:hover { color:#928452; }	           .comment-content a { color:#928452; }	           .comment-content a:hover { color:#928452; }	           #cancel-comment-reply-link:hover { color:#928452; }	           .comments-nav a:hover { color:#928452; }	           .post-meta-item .genericon { color:#928452; }	           .post-meta-item a:hover { color:#928452; }	           .post-nav a:hover h5 { color:#928452; }	           .author-name a:hover { color:#928452; }	           .author-meta-social a:hover { background:#928452; }	           .logged-in-as a { color:#928452; }	           .comment-form input[type="text"]:focus { border-color:#928452; }	           .comment-form input[type="email"]:focus { border-color:#928452; }	           .comment-form input[type="url"]:focus { border-color:#928452; }	           .comment-form textarea:focus { border-color:#928452; }	           .comment-form input[type="submit"] { color:#928452; }	           
	           .comment-form input[type="submit"] { color:#928452; }	           .comment-form input[type="submit"] { border-color:#928452; }	           .comment-form input[type="submit"]:hover { background-color:#928452; }	           .comment-form input[type="submit"]:hover { background-color:#928452; }	           .archive-nav a { color:#928452; }	           .archive-nav a { border:#928452; }	           .archive-nav a:hover { background:#928452; }	           .tagcloud a:hover { background:#928452; }	           .search-form .search-button:hover:before { color:#928452; }	           .widget_hoffman_recent_posts a:hover .title { color:#928452; }	           .widget_hoffman_recent_comments a:hover .title span { color:#928452; }	           .widget_hoffman_recent_posts a:hover .genericon { color:#928452; }	           .credits-menu a { color:#928452; }	           .credits .menu-social a:hover { background:#928452; }	           .credits p a:hover { color:#928452; }	           .nav-toggle.active p { color:#928452; }	           .nav-toggle.active .bar { background:#928452; }	      </style> 
	      
	      <!--/Customizer CSS-->
	      
      <style type="text/css" id="custom-background-css">
body.custom-background { background-color: #f9f9f9; }
</style>
	
	</head>
	
	<body class="archive category category-nosql category-10 custom-background no-featured-image">
	
		<div class="wrapper" id="wrapper">
	
			<div class="header">
							
							
					<h1 class="blog-title">
						<a href="http://www.kcloze.com" title="月随人 &mdash; 专注PHP,LNMP,C,Linux网站架构技术" rel="home">月随人</a>
					</h1>
					
										
						<h3 class="blog-description">专注PHP,LNMP,C,Linux网站架构技术</h3>
					
										
								
				<a class="nav-toggle" title="Click to view the navigation" href="#">
				
					<div class="bars">
					
						<div class="bar"></div>
						<div class="bar"></div>
						<div class="bar"></div>
						
						<div class="clear"></div>
					
					</div>
					
					<p>
						<span class="menu">Menu</span>
						<span class="close">Close</span>
					</p>
				
				</a>
				
								
				
				<div class="clear"></div>
								
			</div> <!-- /header -->
			
			<div class="navigation hidden bg-dark">
		
				<div class="section-inner">
				
					<ul class="main-menu">
						
						<li id="menu-item-830" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-830"><a href="http://www.kcloze.com/">首页</a></li>
<li id="menu-item-832" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-832"><a href="http://www.kcloze.com/sample-page-2/">关于我</a></li>
<li id="menu-item-713" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-713"><a href="https://github.com/kcloze">github主页</a></li>
<li id="menu-item-712" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-712"><a href="http://www.weibo.com/kcloze">新浪微博</a></li>
<li id="menu-item-834" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-834"><a href="http://www.kcloze.com/%e5%88%86%e7%b1%bb/">分类</a></li>
						
						<div class="clear"></div>
							
					 </ul>
					 
					 <ul class="mobile-menu hidden">
					
					<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-830"><a href="http://www.kcloze.com/">首页</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-832"><a href="http://www.kcloze.com/sample-page-2/">关于我</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-713"><a href="https://github.com/kcloze">github主页</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-712"><a href="http://www.weibo.com/kcloze">新浪微博</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-834"><a href="http://www.kcloze.com/%e5%88%86%e7%b1%bb/">分类</a></li>
					
				</ul>
						
				</div> <!-- /section-inner -->
					
			</div> <!-- /navigation -->
<div class="content">

	<div class="page-title">
			
		<div class="section-inner">

			<h4>				Category: Nosql						
			</h4>
			
					
		</div> <!-- /section-inner -->
		
	</div> <!-- /page-title -->
	
		
					
		<div class="posts" id="posts">
			
									
				<div id="post-632" class="post-632 post type-post status-publish format-standard hentry category-nosql no-featured-image">

		
		
	<div class="post-inner section-inner thin">
		
		<div class="post-header">
			
			<div class="post-meta top">
			
				<a href="http://www.kcloze.com/redis-%e6%8e%a7%e5%88%b6shell%e8%84%9a%e6%9c%ac/" title="redis 控制shell脚本">2014年1月11日</a>
				
				 
				
								
			</div>
			
		    <h2 class="post-title"><a href="http://www.kcloze.com/redis-%e6%8e%a7%e5%88%b6shell%e8%84%9a%e6%9c%ac/" title="redis 控制shell脚本">redis 控制shell脚本</a></h2>
		    	    
		</div> <!-- /post-header -->
		
		<div class="post-content">
		
			<p>
	安装方法：
</p>
<p>
	1.centos默认没有安装tcl:<br />
	sudo yum install -y tcl<br />
	wget http://download.redis.io/releases/redis-2.8.13.tar.gz<br />
	tar zxvf redis-2.8.13.tar.gz<br />
	cd redis-2.8.13/src<br />
	2.安装到指定目录:<br />
	sudo make PREFIX=/opt/redis install<br />
	3.复制配置文件到安装目录：<br />
	cp ../redis.conf /opt/redis<br />
	4.修改redis.conf，打开后台运行选项：<br />
	daemonize yes<br />
	5.启动服务：<br />
	sudo /opt/redis/bin/redis-server ../reids.conf
</p>
<p>
	管理脚本：
</p>
<pre class="brush:shell">
#!/bin/sh
#
# redis - this script starts and stops the redis-server daemon
#
#
# chkconfig:   - 85 15
# description:  Redis is a persistent key-value database
# processname: redis-server
# config:      /etc/redis/redis.conf
# config:      /etc/sysconfig/redis
# pidfile:     /var/run/redis.pid

# Source function library.
. /etc/rc.d/init.d/functions

# Source networking configuration.
. /etc/sysconfig/network

# Check that networking is up.
[ "$NETWORKING" = "no" ] &amp;&amp; exit 0

redis=&quot;/opt/redis/src/redis-server&quot;
prog=$(basename $redis)

REDIS_CONF_FILE=&quot;/opt/redis/redis.conf&quot;

[ -f /etc/sysconfig/redis ] &amp;&amp; . /etc/sysconfig/redis

lockfile=/var/lock/subsys/redis

start() {
    [ -x $redis ] || exit 5
    [ -f $REDIS_CONF_FILE ] || exit 6
    echo -n $&quot;Starting $prog: &quot;
    daemon $redis $REDIS_CONF_FILE
    retval=$?
    echo
    [ $retval -eq 0 ] &amp;&amp; touch $lockfile
    return $retval
}

stop() {
    echo -n $&quot;Stopping $prog: &quot;
    killproc $prog -QUIT
    retval=$?
    echo
    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile
    return $retval
}

restart() {
    stop
    start
}

reload() {
    echo -n $&quot;Reloading $prog: &quot;
    killproc $redis -HUP
    RETVAL=$?
    echo
}

force_reload() {
    restart
}

rh_status() {
    status $prog
}

rh_status_q() {
    rh_status &gt;/dev/null 2&gt;&amp;1
}

case &quot;$1&quot; in
    start)
        rh_status_q &amp;&amp; exit 0
        $1
        ;;
    stop)
        rh_status_q || exit 0
        $1
        ;;
    restart|configtest)
        $1
        ;;
    reload)
        rh_status_q || exit 7
        $1
        ;;
    force-reload)
        force_reload
        ;;
    status)
        rh_status
        ;;
    condrestart|try-restart)
        rh_status_q || exit 0
            ;;
    *)
        echo $&quot;Usage: $0 {start|stop|status|restart|condrestart|try-restart|reload|force-reload}&quot;
        exit 2
esac</pre>
<p>
	设为开机启动
</p>
<ul style="padding-right: 0px; padding-left: 0px; margin: 0px 0px 10px 20px; line-height: 22.5px; font-family: 微软雅黑, Verdana, sans-serif, 宋体;">
<li style="padding: 0px; margin: 0px;">
		按上面内容编写脚本，vim /etc/init.d/redis
	</li>
<li style="padding: 0px; margin: 0px;">
		<span style="padding: 0px; margin: 0px; line-height: 1.5; font-size: 12.5px;">执行权限：</span><code class="shell functions" style="word-break: break-all; line-height: 13.75px; white-space: pre; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; color: rgb(255, 20, 147) !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: inherit !important; background: none !important;">chmod</code><span style="font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace; line-height: 13.75px; white-space: pre;"> </span><code class="shell plain" style="word-break: break-all; line-height: 13.75px; white-space: pre; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; color: black !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: inherit !important; background: none !important;">+x </code><code class="shell plain" style="word-break: break-all; line-height: 13.75px; white-space: pre; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; color: black !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: inherit !important; background: none !important;">/etc/init</code><code class="shell plain" style="word-break: break-all; line-height: 13.75px; white-space: pre; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; color: black !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: inherit !important; background: none !important;">.d</code><code class="shell plain" style="word-break: break-all; line-height: 13.75px; white-space: pre; padding: 0px !important; margin: 0px !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; border: 0px !important; border-top-left-radius: 0px !important; border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important; border-bottom-left-radius: 0px !important; color: black !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; outline: 0px !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; min-height: inherit !important; background: none !important;">/redis</code>
	</li>
<li style="padding: 0px; margin: 0px;">
		<span style="padding: 0px; margin: 0px; line-height: 1.5; font-size: 12.5px;">开机自启动</span></p>
<p>
			&nbsp;
		</p>
<p>
			# 尝试启动或停止redis<br />
			service redis start<br />
			service redis stop
		</p>
<p>
			# 开启服务自启动<br />
			chkconfig redis on
		</p>
</li>
<li style="padding: 0px; margin: 0px;">
<p>
			&nbsp;
		</p>
</li>
</ul>
		
		</div>
	
	</div> <!-- /post-inner -->

</div>				
									
				<div id="post-629" class="post-629 post type-post status-publish format-standard hentry category-nosql no-featured-image">

		
		
	<div class="post-inner section-inner thin">
		
		<div class="post-header">
			
			<div class="post-meta top">
			
				<a href="http://www.kcloze.com/mongodb-%e5%90%af%e5%8a%a8%e5%92%8c%e5%81%9c%e6%ad%a2%e8%84%9a%e6%ad%a5/" title="mongodb 启动和停止脚步">2014年1月11日</a>
				
				 
				
								
			</div>
			
		    <h2 class="post-title"><a href="http://www.kcloze.com/mongodb-%e5%90%af%e5%8a%a8%e5%92%8c%e5%81%9c%e6%ad%a2%e8%84%9a%e6%ad%a5/" title="mongodb 启动和停止脚步">mongodb 启动和停止脚步</a></h2>
		    	    
		</div> <!-- /post-header -->
		
		<div class="post-content">
		
			<p>启动脚步</p>
<pre class="brush:shell">#!/bin/bash
if [ $# != 0 ];then
    port=$1;
else
    port=27017
fi
mkdir -p /opt/mongodb/data_$port
/opt/mongodb/bin/mongod --auth --dbpath=/opt/mongodb/data_$port --logpath=/opt/mongodb/mongodb_$port.log --logappend --port=$port &gt; /dev/null 2&gt;&amp;1 &amp;</pre>
<p>停止脚本</p>
<pre class="brush:shell">#!/bin/bash
if [ $# != 0 ];then
    port=$1;
else
    port=27017
fi
pid=`ps -o pid,command ax | grep mongod | grep $port | awk '!/awk/ &amp;&amp; !/grep/ {print $1}'`;
if [ "${pid}" != "" ]; then
        kill -2 ${pid};
fi
echo "stop mongodb port:$port"</pre>
		
		</div>
	
	</div> <!-- /post-inner -->

</div>				
										
		</div> <!-- /posts -->
		
						
	
</div> <!-- /content -->


	<div class="footer">
			
		<div class="section-inner">
		
						
				<div class="column column-1 one-third">
				
					<div class="widgets">
			
						<div class="widget widget_categories"><div class="widget-content"><h3 class="widget-title">分类目录</h3><select name='cat' id='cat' class='postform' >
	<option value='-1'>选择分类目录</option>
	<option class="level-0" value="2">Docs&nbsp;&nbsp;(20)</option>
	<option class="level-0" value="3">Go&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="4">IDE&nbsp;&nbsp;(8)</option>
	<option class="level-0" value="5">Js Html&nbsp;&nbsp;(11)</option>
	<option class="level-0" value="6">Life&nbsp;&nbsp;(13)</option>
	<option class="level-0" value="7">Linux&nbsp;&nbsp;(21)</option>
	<option class="level-0" value="8">Mysql&nbsp;&nbsp;(29)</option>
	<option class="level-0" value="9">Nginx&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="10" selected="selected">Nosql&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="11">PHP&nbsp;&nbsp;(48)</option>
	<option class="level-0" value="12">Python&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="13">Yii&nbsp;&nbsp;(8)</option>
</select>

<script type='text/javascript'>
/* <![CDATA[ */
	var dropdown = document.getElementById("cat");
	function onCatChange() {
		if ( dropdown.options[dropdown.selectedIndex].value > 0 ) {
			location.href = "http://www.kcloze.com/?cat="+dropdown.options[dropdown.selectedIndex].value;
		}
	}
	dropdown.onchange = onCatChange;
/* ]]> */
</script>

</div><div class="clear"></div></div>											
					</div>
					
				</div>
				
			 <!-- /footer-a -->
				
			 <!-- /footer-b -->
								
			 <!-- /footer-c -->
			
			<div class="clear"></div>
		
		</div> <!-- /footer-inner -->
	
	</div> <!-- /footer -->


<div class="credits">

	<div class="section-inner">
	
			
		<div class="fleft">
		
			<ul class="credits-menu">

						
				<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-830"><a href="http://www.kcloze.com/">首页</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-832"><a href="http://www.kcloze.com/sample-page-2/">关于我</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-713"><a href="https://github.com/kcloze">github主页</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-712"><a href="http://www.weibo.com/kcloze">新浪微博</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-834"><a href="http://www.kcloze.com/%e5%88%86%e7%b1%bb/">分类</a></li>
				
				<div class="clear"></div>
					
			 </ul>

			<p>&copy; 2015 <a href="http://www.kcloze.com" title="月随人">月随人</a>. All rights reserved.</p>
			
			<p>Theme by <a href="http://www.andersnoren.se">Anders Nor&eacute;n</a>.</p>		
			
		</div> <!-- /fleft -->
		
		<div class="clear"></div>
		
	</div>

</div> <!-- /credits -->

<div id="su-footer-links" style="text-align: center;"></div><script type='text/javascript' src='http://www.kcloze.com/wp-content/themes/hoffman/js/flexslider.min.js?ver=4.1'></script>
<script type='text/javascript' src='http://www.kcloze.com/wp-content/themes/hoffman/js/global.js?ver=4.1'></script>

</body>
</html>
<!-- This is the static html file created at 2015-01-11 02:38:16 by super static cache -->